<nav class="navbar-modern" [class.search-active]="isMobileSearchActive">
  <div class="container-fluid">
    <!-- LEFT: Logo -->
    <div class="navbar-left">
      <div class="navbar-logo">
        <a routerLink="/">
          <img src="assets/LOGO_ori.png" alt="Country Meat Logo" />
        </a>
      </div>
    </div>

    <!-- LOCATION -->
    <div class="navbar-location">
      <i class="fa fa-map-marker location-icon"></i>
      <div class="location-details">
        <span class="location-city">
          Bangalore <i class="fa fa-chevron-down"></i>
        </span>
        <span class="location-address">
          Bengaluru, Karnataka 560049, India
        </span>
      </div>
    </div>

    <!-- SEARCH BAR -->
    <div class="navbar-search">
      <button class="close-search-btn" (click)="toggleMobileSearch()">
        <i class="fa fa-arrow-left"></i>
      </button>
      <div class="search-bar">
        <input
          type="text"
          class="search-input"
          placeholder="Search for products..."
        />
        <button class="search-button">
          <i class="fa fa-search"></i>
        </button>
      </div>
    </div>

    <!-- ACTION LINKS -->
    <div class="navbar-actions">
      <!-- CATEGORIES DROPDOWN -->
      <div class="action-link-dropdown" #categoriesDropdown>
        <a class="action-link" (click)="toggleCategoriesDropdown($event)">
          <img
            src="assets/icon/categories.png"
            alt="Categories Icon"
            class="action-icon-img"
          />
          <span>Categories</span>
        </a>

        <div class="dropdown-menu" [class.show]="isCategoriesDropdownOpen">
          <a
            routerLink="/products/chicken"
            class="dropdown-item"
            (click)="closeCategoriesDropdown()"
          >
            <img
              src="assets/images/products/ck/country-king-0.png"
              alt="Chicken"
              class="dropdown-item-icon"
            />
            <div class="dropdown-item-content">
              <span class="dropdown-item-title">Country Chicken</span>
              <span class="dropdown-item-desc">Premium quality chicken cuts</span>
            </div>
          </a>

          <a
            routerLink="/products/eggs"
            class="dropdown-item"
            (click)="closeCategoriesDropdown()"
          >
            <img
              src="assets/images/products/eggs/egg-1.png"
              alt="Eggs"
              class="dropdown-item-icon"
            />
            <div class="dropdown-item-content">
              <span class="dropdown-item-title">Country Eggs</span>
              <span class="dropdown-item-desc">Farm-fresh eggs</span>
            </div>
          </a>

          <div class="dropdown-item coming-soon">
            <img
              src="assets/images/categories/mutton.jpg"
              alt="Mutton"
              class="dropdown-item-icon"
            />
            <div class="dropdown-item-content">
              <span class="dropdown-item-title">Mutton</span>
              <span class="dropdown-item-desc">Premium goat meat</span>
            </div>
            <span class="coming-soon-badge">Coming Soon</span>
          </div>

          <div class="dropdown-item coming-soon">
            <img
              src="assets/images/categories/sea-food.jpg"
              alt="Seafood"
              class="dropdown-item-icon"
            />
            <div class="dropdown-item-content">
              <span class="dropdown-item-title">Seafood</span>
              <span class="dropdown-item-desc">Daily catch from ocean</span>
            </div>
            <span class="coming-soon-badge">Coming Soon</span>
          </div>
        </div>
      </div>

      <!-- STORES LINK -->
      <a href="#" class="action-link">
        <img
          src="assets/icon/store.png"
          alt="Stores Icon"
          class="action-icon-img"
        />
        <span>Stores</span>
      </a>

      <!-- LOGIN / LOGGED-IN -->
      <ng-container *ngIf="!isLoggedIn; else loggedInUser">
        <a routerLink="/login" class="action-link">
          <img
            src="assets/icon/user.png"
            alt="User Icon"
            class="action-icon-img"
          />
          <span>Login</span>
        </a>
      </ng-container>

      <!-- ✅ LOGGED-IN USER -->
      <ng-template #loggedInUser>
        <div class="user-greeting-dropdown action-link-dropdown" #userDropdown>
          <a class="action-link" (click)="toggleUserDropdown($event)">
            <img
              src="assets/icon/user.png"
              alt="User Icon"
              class="action-icon-img"
            />
            <span>Hi, {{ userName }}</span>
          </a>
          <div class="dropdown-menu" [class.show]="showUserDropdown">
            <button class="dropdown-item logout-btn" (click)="logout()">
              Logout
            </button>
          </div>
        </div>
      </ng-template>

      <a routerLink="/about" class="action-link" routerLinkActive="active">
        About Us
      </a>
    </div>

    <!-- CART -->
    <div class="navbar-cart">
      <a routerLink="/cart" class="cart-button">
        <div class="cart-icon-wrapper">
          <i class="fa fa-shopping-cart"></i>
        </div>
        <div class="cart-details">
          <span class="cart-items">1 item</span>
          <span class="cart-price">₹199</span>
        </div>
      </a>
    </div>
  </div>
</nav>

<!-- ✅ BOTTOM NAV -->
<div class="bottom-nav">
  <a routerLink="/" class="bottom-nav-link">
    <i class="fa fa-home"></i>
    <span>Home</span>
  </a>

  <a routerLink="/about" class="bottom-nav-link">
    <i class="fa fa-info-circle"></i>
    <span>About Us</span>
  </a>

  <a class="bottom-nav-link" (click)="toggleMobileSearch()">
    <i class="fa fa-search"></i>
    <span>Search</span>
  </a>

  <!-- ✅ ACCOUNT SECTION -->
  <ng-container *ngIf="!isLoggedIn; else bottomLoggedIn">
    <a routerLink="/login" class="bottom-nav-link">
      <img src="assets/icon/user.png" alt="Account Icon" />
      <span>Account</span>
    </a>
  </ng-container>

  <ng-template #bottomLoggedIn>
    <div class="bottom-nav-link user-menu" #bottomUserDropdown>
      <a (click)="toggleBottomUserDropdown($event)">
        <img src="assets/icon/user.png" alt="User Icon" />
        <span>{{ userName }}</span>
      </a>
      <div class="user-dropdown" [class.show]="showBottomUserDropdown">
        <button (click)="logout()">Logout</button>
      </div>
    </div>
  </ng-template>

  <a routerLink="/cart" class="bottom-nav-link">
    <i class="fa fa-shopping-cart"></i>
    <span>Cart</span>
  </a>
</div>

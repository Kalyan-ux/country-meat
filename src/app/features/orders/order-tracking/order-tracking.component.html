<!-- BEGIN sections : order-tracking -->
<div id="section-order-tracking" class="countrymeat-section">
  <section class="order-tracking-section pt-40 pb-40">
    <div class="container">

      <!-- Page Header -->
      <div class="row mb-40">
        <div class="col-12">
          <div class="section-title text-center">
            <h2 class="tp-section-title">Track Your Order</h2>
            <p class="tp-section-subtitle">Enter your order ID to track the current status of your order</p>
          </div>
        </div>
      </div>

      <!-- Order Search -->
      <div class="row justify-content-center mb-40">
        <div class="col-lg-6 col-md-8">
          <div class="order-search-card">
            <div class="search-form">
              <div class="input-group">
                <input
                  type="text"
                  [(ngModel)]="searchOrderId"
                  placeholder="Enter Order ID (e.g., CM123456)"
                  class="form-control"
                  [class.is-invalid]="searchError">
                <button
                  class="btn btn-primary"
                  (click)="trackOrder()"
                  [disabled]="isLoading">
                  <i class="fa fa-search" *ngIf="!isLoading"></i>
                  <i class="fa fa-spinner fa-spin" *ngIf="isLoading"></i>
                  {{ isLoading ? 'Searching...' : 'Track Order' }}
                </button>
              </div>
              <div class="invalid-feedback" *ngIf="searchError">
                {{ searchError }}
              </div>
            </div>

            <div class="search-help" *ngIf="!order">
              <small class="text-muted">
                <i class="fa fa-info-circle"></i>
                You can find your Order ID in the confirmation email or SMS
              </small>
            </div>
          </div>
        </div>
      </div>

      <!-- Order Tracking Results -->
      <div *ngIf="order && !isLoading" class="order-tracking-results">

        <!-- Order Header -->
        <div class="row mb-30">
          <div class="col-12">
            <div class="order-header-card">
              <div class="row align-items-center">
                <div class="col-lg-6">
                  <div class="order-info">
                    <h4 class="order-id">Order #{{ order.id }}</h4>
                    <div class="order-meta">
                      <span class="order-date">
                        <i class="fa fa-calendar"></i>
                        Placed on {{ formatDate(order.orderDate) }} at {{ formatTime(order.orderDate) }}
                      </span>
                      <span class="order-amount">
                        <i class="fa fa-rupee"></i>
                        Total: ₹{{ order.totalAmount }}
                      </span>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 text-lg-end">
                  <div class="estimated-delivery">
                    <div class="delivery-label">Estimated Delivery</div>
                    <div class="delivery-time">
                      <i class="fa fa-truck"></i>
                      {{ formatDate(order.estimatedDelivery) }} by {{ formatTime(order.estimatedDelivery) }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <!-- Order Status Timeline -->
          <div class="col-lg-8 mb-30">
            <div class="tracking-timeline-card">
              <div class="card-header">
                <h5 class="card-title">
                  <i class="fa fa-map-marker"></i>
                  Order Status
                </h5>
              </div>
              <div class="card-body">
                <div class="timeline">
                  <div
                    class="timeline-item"
                    *ngFor="let status of order.statusHistory; let i = index"
                    [class.completed]="status.isCompleted"
                    [class.active]="status.isActive">

                    <div class="timeline-marker">
                      <i class="fa fa-check" *ngIf="status.isCompleted"></i>
                      <i class="fa fa-circle" *ngIf="status.isActive"></i>
                      <i class="fa fa-circle-o" *ngIf="!status.isCompleted && !status.isActive"></i>
                    </div>

                    <div class="timeline-content">
                      <div class="timeline-header">
                        <h6 class="timeline-title">{{ status.title }}</h6>
                        <div class="timeline-time" *ngIf="status.timestamp">
                          {{ formatDate(status.timestamp) }} • {{ formatTime(status.timestamp) }}
                          <span class="time-ago">({{ getTimeAgo(status.timestamp) }})</span>
                        </div>
                      </div>
                      <p class="timeline-description">{{ status.description }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Order Details Sidebar -->
          <div class="col-lg-4">
            <!-- Delivery Address -->
            <div class="info-card mb-20">
              <div class="card-header">
                <h6 class="card-title">
                  <i class="fa fa-map-marker"></i>
                  Delivery Address
                </h6>
              </div>
              <div class="card-body">
                <div class="address-info">
                  <strong>{{ order.customerName }}</strong>
                  <div class="phone">{{ order.customerPhone }}</div>
                  <div class="address">{{ order.deliveryAddress }}</div>
                </div>
              </div>
            </div>

            <!-- Payment Method -->
            <div class="info-card mb-20">
              <div class="card-header">
                <h6 class="card-title">
                  <i class="fa fa-credit-card"></i>
                  Payment
                </h6>
              </div>
              <div class="card-body">
                <div class="payment-info">
                  <i class="fa fa-money" *ngIf="order.paymentMethod === 'Cash on Delivery'"></i>
                  <i class="fa fa-credit-card" *ngIf="order.paymentMethod !== 'Cash on Delivery'"></i>
                  {{ order.paymentMethod }}
                </div>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
              <button class="btn btn-outline-primary btn-block mb-10" (click)="callSupport()">
                <i class="fa fa-phone"></i>
                Call Support
              </button>

              <button class="btn btn-outline-secondary btn-block mb-10" (click)="clearSearch()">
                <i class="fa fa-search"></i>
                Track Another Order
              </button>

              <button class="btn btn-primary btn-block" (click)="goHome()">
                <i class="fa fa-home"></i>
                Go to Home
              </button>
            </div>

            <!-- Help Section -->
            <div class="help-section mt-30">
              <div class="help-card">
                <i class="fa fa-question-circle fa-2x mb-15"></i>
                <h6>Need Help?</h6>
                <p class="help-text">
                  If you have any questions about your order, feel free to contact our customer support.
                </p>
                <div class="contact-info">
                  <div class="contact-item">
                    <i class="fa fa-phone"></i>
                    <span>+91 80123 45678</span>
                  </div>
                  <div class="contact-item">
                    <i class="fa fa-envelope"></i>
                    <span>support&#64;countrymeat.com</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>
</div>
